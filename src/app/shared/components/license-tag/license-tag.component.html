<nz-tag
  [nzColor]="nzColor"
  [ngClass]="{ muted: muted() }"
  [nz-popover]="!isMobileView() ? licenseContent : undefined"
  [nzPopoverTitle]="!isMobileView() ? licenseFullTitle : undefined"
  [nzPopoverContent]="!isMobileView() ? licenseContent : undefined"
  nzPopoverTrigger="hover"
  (click)="isMobileView() ? togglePopover() : null"
>
  <nz-icon nzType="info-circle" nzTheme="outline" class="tag-icon"></nz-icon>
  {{ licenseTitle }}
</nz-tag>

@if (isMobileView()) {
  <nz-drawer
    [nzVisible]="showPopover()"
    [nzTitle]="licenseFullTitle"
    nzPlacement="bottom"
    nzHeight="auto"
    (nzOnClose)="showPopover.set(false)"
  >
    <ng-container *nzDrawerContent>
      <ng-container *ngTemplateOutlet="licenseContent"></ng-container>
    </ng-container>
  </nz-drawer>
}

<ng-template #licenseContent>
  <div class="license-content">
    <p class="license-description">{{ description }}</p>
    <a
      [href]="getLicenseUrl(license())"
      target="_blank"
      rel="noopener noreferrer"
      class="license-link"
    >
      <i class="bx bx-arrow-out-up-left-stroke-square"></i>
      <span>{{ LearnMoreText }}</span>
    </a>
  </div>
</ng-template>
