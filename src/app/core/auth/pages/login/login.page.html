<div class="login">
  <!-- Transparent Header -->
  <header class="login__header">
    <div class="login__header-row">
      <a [routerLink]="['/']" class="login__back" [title]="'AUTH.LOGIN.RETURN_TO_WEBSITE' | translate">
        <i class='bx bx-home-alt-3'></i> 
        {{ 'AUTH.LOGIN.RETURN_TO_WEBSITE' | translate }}
      </a>

      <app-lang-switch></app-lang-switch>
    </div>
  </header>

  <!-- Main Content -->
  <div class="login__container">
    <div class="login__card">
      <div class="login__logo">
        <img src="/assets/images/logo.svg" alt="Itqan" width="50" height="50" />
      </div>

      <div class="login__welcome">
        <h1 class="login__title">{{ 'AUTH.LOGIN.TITLE' | translate }}</h1>
        <p class="login__subtitle">{{ 'AUTH.LOGIN.SUBTITLE' | translate }}</p>
      </div>

      <form (ngSubmit)="onSubmit()" [formGroup]="loginForm" class="login__form">
        @if (errorMessage()) {
          <div class="login__alert">{{ errorMessage() }}</div>
        }

        <div class="login__field">
          <label for="email" class="login__label">{{ 'AUTH.LOGIN.EMAIL_LABEL' | translate }}</label>
          <input id="email" name="email" type="email" formControlName="email" [placeholder]="'FORMS.PLACEHOLDERS.EMAIL' | translate" class="login__input" [class.login__input--invalid]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched" [attr.aria-invalid]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched" />
          @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
            <p class="login__error">{{ 'AUTH.LOGIN.ERRORS.EMAIL_REQUIRED' | translate }}</p>
          }
        </div>

        <div class="login__field">
          <label for="password" class="login__label">{{ 'AUTH.LOGIN.PASSWORD_LABEL' | translate }}</label>
          <input id="password" name="password" type="password" formControlName="password" [placeholder]="'FORMS.PLACEHOLDERS.PASSWORD' | translate" class="login__input" [class.login__input--invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" [attr.aria-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" />
          @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
            <p class="login__error">{{ 'AUTH.LOGIN.ERRORS.PASSWORD_REQUIRED' | translate }}</p>
          }
        </div>

        <button type="submit" [disabled]="loginForm.invalid || authService.isLoading()" class="login__submit">
          @if (authService.isLoading()) {
            <span class="login__spinner" aria-hidden="true"></span>
          } @else {
            {{ 'AUTH.LOGIN.SUBMIT_BUTTON' | translate }}
          }
        </button>
      </form>

      <div class="login__footer">
        <p class="login__footer-text">
          {{ 'AUTH.LOGIN.NO_ACCOUNT' | translate }}
          <a [routerLink]="['/register']" class="login__footer-link">{{ 'AUTH.LOGIN.CREATE_ACCOUNT_LINK' | translate }}</a>
        </p>
      </div>
    </div>
  </div>
</div>


