<div class="login">
  <header class="login__header">
    <div class="login__header-row">
      <a [routerLink]="['/']" class="login__back" [title]="'AUTH.LOGIN.RETURN_TO_WEBSITE' | translate">
        <i class='bx bx-home-alt-3'></i> 
        {{ 'AUTH.LOGIN.RETURN_TO_WEBSITE' | translate }}
      </a>
      <app-lang-switch></app-lang-switch>
    </div>
  </header>

  <div class="login__container">
    <div class="login__card">
      <div class="login__logo">
        <img src="/assets/images/logo.svg" alt="Itqan" width="50" height="50" />
      </div>

      <div class="login__welcome">
        <h1 class="login__title">{{ 'AUTH.REGISTER.TITLE' | translate }}</h1>
        <p class="login__subtitle">{{ 'AUTH.REGISTER.SUBTITLE' | translate }}</p>
      </div>

      <form (ngSubmit)="onSubmit()" [formGroup]="registerForm" class="login__form">
        @if (errorMessage()) {
          <div class="login__alert">{{ errorMessage() }}</div>
        }

        <div class="login__grid">
          <div class="login__field">
            <label for="first_name" class="login__label">{{ 'AUTH.REGISTER.FIRST_NAME_LABEL' | translate }}</label>
            <input id="first_name" type="text" formControlName="first_name" [placeholder]="'FORMS.PLACEHOLDERS.FIRST_NAME' | translate" class="login__input" [class.login__input--invalid]="registerForm.get('first_name')?.invalid && registerForm.get('first_name')?.touched" [attr.aria-invalid]="registerForm.get('first_name')?.invalid && registerForm.get('first_name')?.touched" />
            @if (registerForm.get('first_name')?.invalid && registerForm.get('first_name')?.touched) {
              <p class="login__error">{{ 'AUTH.REGISTER.ERRORS.FIRST_NAME_REQUIRED' | translate }}</p>
            }
          </div>

          <div class="login__field">
            <label for="last_name" class="login__label">{{ 'AUTH.REGISTER.LAST_NAME_LABEL' | translate }}</label>
            <input id="last_name" type="text" formControlName="last_name" [placeholder]="'FORMS.PLACEHOLDERS.LAST_NAME' | translate" class="login__input" [class.login__input--invalid]="registerForm.get('last_name')?.invalid && registerForm.get('last_name')?.touched" [attr.aria-invalid]="registerForm.get('last_name')?.invalid && registerForm.get('last_name')?.touched" />
            @if (registerForm.get('last_name')?.invalid && registerForm.get('last_name')?.touched) {
              <p class="login__error">{{ 'AUTH.REGISTER.ERRORS.LAST_NAME_REQUIRED' | translate }}</p>
            }
          </div>
        </div>

        <div class="login__field">
          <label for="email" class="login__label">{{ 'AUTH.REGISTER.EMAIL_LABEL' | translate }}</label>
          <input id="email" type="email" formControlName="email" [placeholder]="'FORMS.PLACEHOLDERS.EMAIL' | translate" class="login__input" [class.login__input--invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" [attr.aria-invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" />
          @if (registerForm.get('email')?.invalid && registerForm.get('email')?.touched) {
            <p class="login__error">{{ 'AUTH.REGISTER.ERRORS.EMAIL_REQUIRED' | translate }}</p>
          }
        </div>

        <div class="login__field">
          <label for="password" class="login__label">{{ 'AUTH.REGISTER.PASSWORD_LABEL' | translate }}</label>
          <input id="password" type="password" formControlName="password" [placeholder]="'FORMS.PLACEHOLDERS.PASSWORD' | translate" class="login__input" [class.login__input--invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" [attr.aria-invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" />
          @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
            <p class="login__error">{{ 'AUTH.REGISTER.ERRORS.PASSWORD_REQUIRED' | translate }}</p>
          }
        </div>

        <div class="login__field">
          <label for="title" class="login__label">{{ 'AUTH.REGISTER.TITLE_LABEL' | translate }}</label>
          <input id="title" type="text" formControlName="title" [placeholder]="'FORMS.PLACEHOLDERS.TITLE' | translate" class="login__input" />
        </div>

        <div class="login__field">
          <label for="phone" class="login__label">{{ 'AUTH.REGISTER.PHONE_LABEL' | translate }}</label>
          <input id="phone" type="tel" formControlName="phone" [placeholder]="'FORMS.PLACEHOLDERS.PHONE_NUMBER' | translate" class="login__input" />
        </div>

        <button type="submit" [disabled]="registerForm.invalid || authService.isLoading()" class="login__submit">
          @if (authService.isLoading()) {
            <span class="login__spinner" aria-hidden="true"></span>
            <span>{{ 'AUTH.REGISTER.SUBMIT_LOADING' | translate }}</span>
          } @else {
            {{ 'AUTH.REGISTER.SUBMIT_BUTTON' | translate }}
          }
        </button>
      </form>

      <div class="login__footer">
        <p class="login__footer-text">
          {{ 'AUTH.REGISTER.ALREADY_HAVE_ACCOUNT' | translate }}
          <a [routerLink]="['/login']" class="login__footer-link">{{ 'AUTH.REGISTER.SIGN_IN_LINK' | translate }}</a>
        </p>
      </div>
    </div>
  </div>
</div>
